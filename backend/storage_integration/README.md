# Storage Integration

This module provides a unified interface for managing data storage operations across different storage backends. It simplifies the process of saving, loading, and managing various types of data used in the trading system.

## Features

- **Multiple Storage Backends**: Support for local file system storage with placeholders for S3 and GCS integrations
- **Data Type Management**: Specialized handling for different data types (market data, backtest results, etc.)
- **Metadata Support**: Attach and retrieve metadata with stored data
- **Data Retention**: Apply configurable retention policies to manage storage usage
- **Format Flexibility**: Support for multiple data formats (CSV, Parquet, JSON, Pickle)

## Usage

### Basic Example

```python
from backend.storage_integration.storage_manager import StorageManager

# Initialize storage manager
storage_mgr = StorageManager()

# Save data
file_path = storage_mgr.save(
    data=df,
    data_type='market_data',
    identifier='AAPL',
    metadata={'source': 'yahoo', 'frequency': 'daily'}
)

# List available data
available_files = storage_mgr.list_data('market_data')

# Load data
data = storage_mgr.load('market_data', 'AAPL', latest=True)
```

### Configuration

The storage manager is configured through a YAML file (default: `config/storage_config.yaml`). A sample configuration might look like:

```yaml
storage:
  backend: "local"  # Options: local, s3, gcs
  local:
    base_path: "data/"
  s3:
    bucket: "your-s3-bucket"
    region: "us-east-1"
  gcs:
    bucket: "your-gcs-bucket"

data_types:
  market_data:
    path: "market_data/"
    format: "parquet"
    retention:
      days: 90
      count: 10
  backtest_results:
    path: "backtest_results/"
    format: "csv"
    retention:
      days: 365
      count: 50
  models:
    path: "models/"
    format: "pickle"
    retention:
      days: 180
      count: 5
```

## Available Data Types

The system is pre-configured to handle the following data types:

- `market_data`: Historical price and volume data
- `backtest_results`: Trading strategy backtest results
- `signals`: Trading signals generated by strategies
- `models`: Trained machine learning models
- `reports`: Performance reports and analytics

## Extending

To add support for a new storage backend, create a new class that inherits from `StorageBackendBase` and implements the required methods. Then update the `get_backend` method in `StorageManager` to instantiate your new backend.

## File Naming Convention

Files are stored with a naming convention that includes:
- Data type
- Identifier
- Timestamp
- Format extension

Example: `market_data_AAPL_20230615T123045.parquet` 